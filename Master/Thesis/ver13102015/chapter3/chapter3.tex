\chapter{Evaluation results} \label{chapter:results}

In this chapter we present the evaluation results of the proposed algorithm (we call it further \emph{2LevelGM}) on some synthetic data and on some real images.

\section{Synthetic Point set Matching}

For the first test we adopted a commonly used approach of evaluation Graph Matching algorithms on the synthetic generated set of nodes (see \cite{Cho2014_Haystack}, \cite{Cho2010_RRWM}, \cite{Leordeanu2009_IPFP}). 

For this propose one generates first a set of $n_1$ normal distributed points $V_1\subset\mathbb{R}^2$ with zero mean and standard deviation $1$. The second set $V_2$ is created from the first one by adding noise $\mathcal{N}(0,\sigma^2)$ to the positions of points in $V_1$ and $m$ additional normal distributed points with $\mathcal{N}(0,1)$.  That means, that the set $V_2$ consists of $n_2=n_1+\bar{n}$ nodes, where $n_1$ points are inliers and $\bar{n}$ points are outliers. The task is to find the correspondences between points in two sets.

In this test we follow the setup in \cite{Cho2014_Haystack} and compare our approach with following well known 
%\comments{state of the art
methods: \emph{MPM}~\cite{Cho2014_Haystack}, \emph{RRWM}~\cite{Cho2010_RRWM}, \emph{SM}~\cite{Leordeanu2005_SM}, \emph{IPFP}~\cite{Leordeanu2009_IPFP}. By performing the comparison, one should consider following differences between the selected algorithms and our one.

First of all, it is time and memory consuming to perform tests for graphs with more than $200$ nodes each, because of the \emph{MPM}, \emph{RRWM}, \emph{SM}, \emph{IPFP} algorithms work with the full affinity matrix of the Graph Matching Problem, whose size is equal to $n_1n_2\times n_1n_2$.\footnote{The affinity matrix between two graphs with $200$ nodes each needs approximately $12Gb$ memory (double precision).} Our algorithms, however, was created to work with graphs bigger than that. To be able to perform the comparison, we fixed the number $n_1$ of points in the first set to $100$ and vary the number of outliers $\bar{n}$ in the second set from $0$ to $50$.

Secondary, we need to include initialization time and time for solution discretization into time measurement of the other algorithms. That was not initially done in \cite{Cho2014_Haystack}, but as \emph{2LevelGM} does this steps almost\footnote{Except the iterations where the local solution did not change} at each iteration, this change makes the comparison more fair. We use also greedy assignment based on \cite{Leordeanu2005_SM} to discretize a solution and not Hungarian Algorithm as it was done in \cite{Cho2014_Haystack}.

Thirdly, the used implementations of \emph{2LevelGM}, \emph{SM} and \emph{IPFP} are purely $MATLAB$ implementations, where some steps of \emph{MPM} and \emph{RRWM} were written using $C++$. This have important influence on the running time performance of the algorithms: optimized $C++$ code can be much faster, than vectorized $MATLAB$ version \ToDo{ref}.

We perform three kinds of tests. In the first test we set number of outliers $\bar{n}$ to zero and vary only the deformation noise $\sigma^2$. We call this test \emph{deformation test}. In the second test, \emph{outlier test}, we do not have deformation noise ($\sigma^2= 0.0$) and compare the behavior of the algorithms in case of increasing number of outliers $\bar{n}$. At least, in the third test, we perform Graph Matching in presence of both \emph{outliers} and \emph{deformation}. For this we fix deformation noise $\sigma^2= 0.03$ and increase iteratively the number of outliers $\bar{n}$. 

During the work on the topic we had tried out different modifications of the initial idea of the Two Level Graph Matching Algorithm described in the section~\ToDo{ref}. In the following we shortly describe different setups of the algorithm and present results of the described tests.

\begin{figure}[h] 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/SyntheticTest/ver4.3.2/deformation/accuracy_avg10t"} 
		%		\caption{} 
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/SyntheticTest/ver4.3.2/deformation/score_avg10t"} 
		%		\caption{} 
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/SyntheticTest/ver4.3.2/deformation/time_summary_avg10t"} 
		%		\caption{} 
	\end{subfigure} 	
	\caption{Deformation test: $n_1=100$, $n_2=100$, $\sigma^2\in[0, 0.2]$}
	\label{fig:syntest1_ver432}
\end{figure}

\FloatBarrier	

\begin{figure}[h] 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/SyntheticTest/ver4.3.2/outliertest_nodeform_n50/accuracy_avg10t"} 
		%		\caption{} 
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/SyntheticTest/ver4.3.2/outliertest_nodeform_n50/score_avg10t"} 
		%		\caption{} 
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/SyntheticTest/ver4.3.2/outliertest_nodeform_n50/time_summary_avg10t"} 
		%		\caption{} 
	\end{subfigure} 	
	\caption{Average of $10$ outlier tests: $n_1=100$, $\bar{n}\in[0,50]$, $\sigma^2=0$}
	\label{fig:syntest2_ver432}
\end{figure}
\FloatBarrier	

\begin{figure}[h] 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/SyntheticTest/ver4.3.2/outliertest_n50/accuracy_avg10t"} 
		%		\caption{} 
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/SyntheticTest/ver4.3.2/outliertest_n50/score_avg10t"} 
		%		\caption{} 
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/SyntheticTest/ver4.3.2/outliertest_n50/time_summary_avg10t"} 
		%		\caption{} 
	\end{subfigure} 	
	\caption{Average of $10$ outlier tests: $n_1=100$, $\bar{n}\in[0,50]$, $\sigma^2=0.03$}
	\label{fig:syntest3_ver432}
\end{figure}
\FloatBarrier

\ToDo{using anchor descriptors}

\ToDo{graph size test (comparison with FAQ)}


\section{Real data test}
\subsection{Image Affine Transformation}

\ToDo{no anchor attributes}

\ToDo{anchor attributes type1}

\ToDo{anchor attributes type2}

\ToDo{anchor attributes tpe1+type2}

\subsubsection{Anchor descriptors}
\begin{figure}[h] 
	
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_1_ProgGM"} 
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_1_TwoLevelGM"} 
	\end{subfigure} 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_1_featureMatching"} 
	\end{subfigure} 	
	\caption{Rotation}
	%\end{figure}
	
	%\begin{figure}[h] 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_2_ProgGM"} 
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_2_TwoLevelGM"} 
	\end{subfigure} 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_2_featureMatching"} 
	\end{subfigure} 	
	%	\caption{Translation}
	%\end{figure}
	
	%\begin{figure}[h] 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_3_ProgGM"} 
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_3_TwoLevelGM"} 
	\end{subfigure} 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_3_featureMatching"} 
	\end{subfigure} 	
	%	\caption{Translation}
	%\end{figure}
	
	%\begin{figure}[h] 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_4_ProgGM"} 
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_4_TwoLevelGM"} 
	\end{subfigure} 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_4_featureMatching"} 
	\end{subfigure} 	
	%	\caption{Translation}
	%\end{figure}
	
	%\begin{figure}[h] 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_5_ProgGM"} 
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_5_TwoLevelGM"} 
	\end{subfigure} 
	\begin{subfigure}[b]{0.33\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/fi_5_featureMatching"} 
	\end{subfigure} 	
	\caption{Rotation/Translation of an image with additional noise ($\sim\mathcal{N}(0,0.001)$)}
\end{figure}

\FloatBarrier

\begin{figure}[h] 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/performance/accuracy"}  
		%		\caption{} 
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/performance/score"}  
		%		\caption{} 
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/ImageTrafo/anchor_descr/using_cpd_afftrafo/performance/time"}  
		%		\caption{} 
	\end{subfigure} 	
	\caption{Synthetic image transformation (using \emph{CDF2}~\cite{Myronenko2009_CPD} for transformation estimation in \emph{twoLevelGM})}
\end{figure}
\FloatBarrier


\subsection{Real Images: House dataset}
\ToDo{no anchor attributes}
\ToDo{anchor attributes type1}
\ToDo{anchor attributes type2}
\ToDo{anchor attributes tpe1+type2}

\subsubsection{Anchor descriptors}
\vspace{-20pt}
\begin{figure}[h] 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/performance/accuracy"}  
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/performance/score"}  
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/performance/time"}  
	\end{subfigure} 	
	\caption{CMU house sequence: extrapolated ground truth}
\end{figure}
\FloatBarrier
\vspace{-20pt}
\begin{figure}[h] 		
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo//solution/fi_1_ProgGM"}  
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/fi_1_TwoLevelGM"}  
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/fi_1_featureMatching"}  
	\end{subfigure} 
	\caption{CMU house sequence: $house.seq.0$ vs $house.seq.1$}	
\end{figure}
\vspace{-20pt}
\begin{figure}[h] 		
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/fi_4_ProgGM"}  
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/fi_4_TwoLevelGM"}  
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/fi_4_featureMatching"}  
	\end{subfigure} 		
	\caption{CMU house sequence: $house.seq.0$ vs $house.seq.30$}
\end{figure}
\vspace{-20pt}
\begin{figure}[h!] 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/fi_11_ProgGM"}  
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/fi_11_TwoLevelGM"}  
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/solution/fi_11_featureMatching"}  
	\end{subfigure} 
	\caption{CMU house sequence: $house.seq.0$ vs $house.seq.100$}
\end{figure}
\FloatBarrier


\begin{figure}[h] 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/performance/accuracy"} 
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/performance/score"}  
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/performance/time"}  
	\end{subfigure} 	
	\caption{CMU house sequence: extrapolated ground truth ans solution}
\end{figure}
\vspace{-20pt}
\begin{figure}[h] 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/fi_1_ProgGM"}  
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/fi_1_TwoLevelGM"}  
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/fi_1_featureMatching"}  
	\end{subfigure} 	
	\caption{CMU house sequence: $house.seq.0$ vs $house.seq.1$}
\end{figure}	
\vspace{-20pt}	
\begin{figure}[h] 	
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/fi_4_ProgGM"}  
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/fi_4_TwoLevelGM"}  
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/fi_4_featureMatching"}  
	\end{subfigure} 		
	\caption{CMU house sequence: $house.seq.0$ vs $house.seq.30$}
\end{figure}
\vspace{-20pt}
\begin{figure}[h]	
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/fi_11_ProgGM"}  
	\end{subfigure}%% 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/fi_11_TwoLevelGM"}  
	\end{subfigure} 
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{"chapter3/fig/HouseSeq/anchor_descr/using_cpd_afftrafo/ext_solution/fi_11_featureMatching"}  
	\end{subfigure} 
	
	\caption{CMU house sequence: $house.seq.0$ vs $house.seq.100$}
\end{figure}
\FloatBarrier

\subsection{some xapmle on Caltech-101 and MSRC}